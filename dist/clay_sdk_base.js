!function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){(function(e){var r,o,i,u,c,s,f,a,l,d,p,h,w,v,m,g,y,j,E;u=t(1),c=e.env.TRUSTED_DOMAIN||"clay.io",o=window.self!==window.top,i=1e3,s=140,f="v0.0.8",a=new u(function(n,e){return this.resolve=n,this.reject=e,null}),v=1,d=!1,l=!1,g={},r=function(n,e,t){var r;return null==t&&(t=function(){return null}),"function"==typeof e&&(t=e,e=null),null!=e&&"[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),r=n.split(".")[0],n=n.slice(n.indexOf(".")+1),w[r].apply(0,[n,e,t])},w={version:function(n,e,t){return t(null,"v0.0.9")},init:function(n,e,t){var r;return r=e[0],function(){var n;return n=r.gameId,l=Boolean(r.debug),"string"==typeof n&&/^[0-9]+$/.test(n)?(d=!0,o?E().then(function(){return y({config:{gameId:n},method:"auth.getStatus"})}).then(function(e){return a.resolve({gameId:n,accessToken:null!=e?e.accessToken:void 0}),a}):(a.resolve({gameId:n,accessToken:null}),a)):t(new Error("Missing or invalid gameId"))}().then(function(n){return t(null,n)})["catch"](t)},client:function(n,e,t){return"client"===n?t(new Error("Missing or invalid method")):function(){var t;return d?null!=e&&"[object Array]"!==Object.prototype.toString.call(e)?u.reject(new Error("Params must be an array")):(t=function(n){var e,t;return e=n.method,t=n.params,h(e).apply(null,t)},a.then(function(r){var i,c;return c=r.gameId,o?(i=null,y({config:{gameId:c},method:n,params:e})["catch"](function(r){return i=r,t({method:n,params:e})})["catch"](function(n){throw"Method not found"===n.message&&null!==i?i:n})):u.resolve(t({method:n,params:e}))})):u.reject(new Error("Must call Clay('init') first"))}().then(function(n){return t(null,n)})["catch"](t)},register:function(n,e,t){var r,o,i;return i=e[0],o=i.method,r=i.fn,t(null,a),w[o]=r}},h=function(n){switch(n){case"share.any":return j;default:return function(){throw new Error("Method not found")}}},j=function(n){var e,t;if(e=(null!=n?n:{}).text,"string"!=typeof e)throw new Error("text parameter is missing or invalid");return(t=function(n){return n=encodeURIComponent(n.substr(0,s)),window.open("https://twitter.com/intent/tweet?text="+n)})(e)},E=function(){return y({config:{gameId:1},method:"ping"})},y=function(n){var e,t,r,o,c,s;e=n.config,c=n.method,s=n.params,t=new u(function(n,e){return this.resolve=n,this.reject=e,null}),o={method:c,params:s};try{o.id=v,o.gameId=e.gameId,o.accessToken=e.accessToken,o._clay=!0,o.jsonrpc="2.0",g[o.id]=t,v+=1,window.parent.postMessage(JSON.stringify(o),"*")}catch(f){r=f,t.reject(r)}return window.setTimeout(function(){return t.reject(new Error("Message Timeout"))},i),t},m=function(n){var e;if(!l&&!p(n.origin))throw new Error("Invalid origin "+n.origin);return e=JSON.parse(n.data),e.id?e.error?g[e.id].reject(new Error(e.error.message)):g[e.id].resolve(e.result):void 0},p=function(n){var e;return e=new RegExp("^https?://(\\w+\\.)?(\\w+\\.)?"+(""+c.replace(/\./g,"\\.")+"/?$")),e.test(n)},window.addEventListener("message",m),n.exports=r,window.setTimeout(function(){var n,e,t,o,i,u;for(e=(null!=(i=window.Clay)?i.q:void 0)||[],window.Clay=r,u=[],t=0,o=e.length;o>t;t++)n=e[t],u.push(r.apply(0,n));return u})}).call(e,t(2))},function(n,e,t){(function(n){!function(){function e(n){function t(n,e,t,r){if("object"!=typeof s&&"function"!=typeof s||"function"!=typeof n)r();else try{var o=0;n.call(s,function(n){o++||(s=n,e())},function(n){o++||(s=n,t())})}catch(i){s=i,t()}}function r(){var n;try{n=s&&s.then}catch(e){return s=e,c=2,r()}t(n,function(){c=1,r()},function(){c=2,r()},function(){try{1==c&&"function"==typeof o?s=o(s):2==c&&"function"==typeof i&&(s=i(s),c=1)}catch(e){return s=e,a()}s==u?(s=TypeError(),a()):t(n,function(){a(3)},a,function(){a(1==c&&3)})})}if("function"!=typeof n&&void 0!=n)throw TypeError();var o,i,u=this,c=0,s=0,f=[];u.promise=u,u.resolve=function(n){return o=this.fn,i=this.er,c||(s=n,c=1,setTimeout(r)),this},u.reject=function(n){return o=this.fn,i=this.er,c||(s=n,c=2,setTimeout(r)),this},u.then=function(n,t){var r=new e;return r.fn=n,r.er=t,3==c?r.resolve(s):4==c?r.reject(s):f.push(r),r},u["catch"]=function(n){return u.then(null,n)};var a=function(n){c=n||4,f.map(function(n){3==c&&n.resolve(s)||n.reject(s)})};try{"function"==typeof n&&n(u.resolve,u.reject)}catch(l){u.reject(l)}return u}e.resolve=function(n){if(1!=this._d)throw TypeError();return new e(function(e){e(n)})},e.reject=function(n){if(1!=this._d)throw TypeError();return new e(function(e,t){t(n)})},e.all=function(n){function t(e,o){if(o)return r.resolve(o);if(e)return r.reject(e);var i=n.reduce(function(n,e){return e&&e.then?n+1:n},0);0==i&&r.resolve(n),n.map(function(e,r){e&&e.then&&e.then(function(e){return n[r]=e,t(),e},t)})}if(1!=this._d)throw TypeError();if(!(n instanceof Array))return e.reject(TypeError());var r=new e;return t(),r},e.race=function(n){function t(e,o){if(o)return r.resolve(o);if(e)return r.reject(e);var i=n.reduce(function(n,e){return e&&e.then?n+1:n},0);0==i&&r.resolve(n),n.map(function(n){n&&n.then&&n.then(function(n){t(null,n)},t)})}if(1!=this._d)throw TypeError();if(!(n instanceof Array))return e.reject(TypeError());if(0==n.length)return new e;var r=new e;return t(),r},e._d=1,n.exports=e}()}).call(e,t(3)(n))},function(n){function e(){}var t=n.exports={};t.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(e){var t=[];return window.addEventListener("message",function(n){var e=n.source;if((e===window||null===e)&&"process-tick"===n.data&&(n.stopPropagation(),t.length>0)){var r=t.shift();r()}},!0),function(n){t.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=e,t.addListener=e,t.once=e,t.off=e,t.removeListener=e,t.removeAllListeners=e,t.emit=e,t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")}},function(n){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}}]);